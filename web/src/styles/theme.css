/* =========================================================
   Tipografía + Variables
   ========================================================= */
@import url("https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap");

:root{
  --bg:#0e0a1f; --bg-2:#120d2c;
  --panel:#171335; --panel-2:#1c1641;
  --text:#f5f7ff; --muted:#adb5d6;
  --violet:#8a2be2; --neon:#35bfff;

  /* Forma/sombra/espacios */
  --radius:18px; --shadow:0 14px 36px rgba(0,0,0,.45);
  --sp-1:8px; --sp-2:12px; --sp-3:16px; --sp-4:20px;

  /* Alturas dashboard */
  --dash-cal-h: 400px;        /* altura del calendario en dashboard */
  --dash-card-h: 210px;
}

/* =========================================================
   Base + layout (GRID en desktop)
   ========================================================= */
*{ box-sizing:border-box; }
html, body, #root { height:100%; }
html, body { overflow-x:hidden; }
body{
  background: radial-gradient(1200px 800px at 20% -10%, #1a1450 0%, #0d0a1d 60%, #0b0818 100%);
  color:var(--text);
  font-family:"Montserrat",system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
  margin:0;
}

.app-wrap{
  display: grid;
  grid-template-columns: 264px 1fr;
  min-height: 100%;
}
.app-content{
  min-width:0; max-width:1280px; margin:0 auto; padding:16px 20px 12px;
}

/* Utilidades */
.fill{ display:flex; flex-direction:column; height:100%; min-height:0; }
.p-3{ padding:var(--sp-4) !important; }
.mb-2{ margin-bottom:12px !important; }
.mb-3{ margin-bottom:16px !important; }
.w-100{ width:100%; }
.fw-bold{ font-weight:700; }
.text-muted{ color:var(--muted); opacity:.9; }
.strong-btn{ font-weight:800; letter-spacing:.2px; }

/* Mostrar/ocultar por viewport */
.only-mobile{ display:none; }
.only-desktop{ display:block; }
.btn-hamburger{ display:none; }  /* oculto en desktop */

/* =========================================================
   Sidebar
   ========================================================= */
.sidebar{
  flex:0 0 264px;
  align-self: stretch;
  display:flex; flex-direction:column; justify-content:space-between;
  background:linear-gradient(180deg,var(--bg-2) 0%, #0b081a 100%);
  border-right:1px solid rgba(255,255,255,.06);
  padding:var(--sp-4);
}
.sidebar-body{ flex:1 1 auto; overflow-y:auto; margin-bottom:var(--sp-3); padding-right:6px; }
.sidebar-footer{ border-top:1px solid rgba(255,255,255,.08); padding-top:12px; margin-top:16px; color:var(--muted); }

/* =========================================================
   Cards / Botones
   ========================================================= */
.card-bugcit{
  background:linear-gradient(180deg,var(--panel) 0%, var(--panel-2) 100%);
  border:1px solid rgba(255,255,255,.06);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  min-width:0;
}
.widget-title{ font-weight:700; letter-spacing:.3px; }
.card-light{
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.08);
  color:var(--text);
  border-radius:14px;
}
.btn-violet{ background:var(--violet); border:none; color:#fff; border-radius:12px; padding:10px 16px; }
.btn-violet:hover{ filter:brightness(1.06); }

/* =========================================================
   FullCalendar tema global
   ========================================================= */
.fc, .fc *{ font-family:"Montserrat",system-ui,sans-serif; }
.fc .fc-toolbar-title{ font-weight:700; color:var(--text); }
.fc .fc-button{
  background:rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.12);
  color:var(--text);
  border-radius:18px !important;
  font-weight:700; padding:6px 14px;
}
.fc .fc-button.fc-button-primary:not(:disabled).fc-button-active,
.fc .fc-button:hover{
  background:rgba(138,43,226,.35);
  border-color:rgba(138,43,226,.6);
}
.fc .fc-scrollgrid, .fc .fc-theme-standard td, .fc .fc-theme-standard th{
  border-color:rgba(255,255,255,.08);
}
.fc .fc-daygrid-day-number{ color:var(--text); }

/* =========================================================
   Dashboard – GRID exacto como el mockup
   ========================================================= */
.dash-topbar { margin-bottom: 12px; }
.dash-title  { font-weight: 800; letter-spacing: .3px; }

.dashboard-grid{
  display:grid;
  grid-template-columns: 1.2fr 1.2fr 1fr;
  grid-template-areas:
    "calendar calendar cat"
    "notes    tasks    learning";
  gap:16px;
}

/* 🔐 Blindaje anti-overlays: cada card crea contexto de posición */
.dashboard-grid > *{ position:relative; }

/* Altura + prioridad del calendario */
.calendar-box{
  grid-area: calendar;
  height: var(--dash-cal-h) !important;
  display:flex; flex-direction:column; overflow:hidden;
  position:relative; z-index:3;              /* << por encima de todo */
  pointer-events:auto;                        /* asegúrate de recibir clics */
}
.cat-box      { grid-area: cat;      position:relative; z-index:1; }
.notes-box    { grid-area: notes;    position:relative; z-index:1; min-height: var(--dash-card-h); display:flex; flex-direction:column; }
.tasks-box    { grid-area: tasks;    position:relative; z-index:1; min-height: var(--dash-card-h); display:flex; flex-direction:column; }
.learning-box { grid-area: learning; position:relative; z-index:1; min-height: var(--dash-card-h); display:flex; flex-direction:column; }

/* Forzamos calendario a rellenar la tarjeta */
.calendar-box .fc,
.calendar-box .fc-view-harness,
.calendar-box .fc-view{ height:100% !important; }
.calendar-box .fc-scroller{ overflow:hidden !important; }

/* Cabecera de días con fondo blanco y texto violeta (solo dashboard) */
.calendar-box .fc .fc-col-header-cell{ background:#fff; }
.calendar-box .fc .fc-col-header-cell-cushion{ color:var(--violet) !important; font-weight:800; }
.calendar-box .fc .fc-daygrid-day-number{ color:var(--violet) !important; font-weight:700; }
.calendar-box .fc .fc-daygrid-day-frame{ padding:6px 4px; }

/* Checklist tareas */
.tasks-checklist{
  list-style:none; padding:0; margin:0;
  display:grid; gap:10px; align-content:start;
}
.tasks-checklist li label{
  display:grid; grid-template-columns:18px 1fr; align-items:center; gap:10px;
  padding:10px 12px; border:1px solid rgba(255,255,255,.12);
  border-radius:12px; background:rgba(255,255,255,.05);
}
.tasks-checklist input[type="checkbox"]{ width:18px; height:18px; accent-color:var(--violet); }
.tasks-checklist span{ color:var(--text); }

/* Aprendizaje layout */
.learning-row{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-top:auto; }
.learning-time{ font-size:2.2rem; font-weight:800; line-height:1; }

/* Globo gatito */
.bugcit-bubble{
  font-size:.95rem; padding:10px 14px;
  background:rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.12);
  border-radius:14px;
}

/* =========================================================
   Responsivo
   ========================================================= */
@media (max-width: 992px){
  .app-wrap{ grid-template-columns: 1fr; }
  .app-content{ padding:14px 16px 12px; }

  .sidebar{ position:fixed; left:0; top:0; width:264px;
    transform:translateX(-100%); transition:transform .25s ease; z-index:1040; height:100vh; }
  .sidebar.open{ transform:translateX(0); }
  .drawer-backdrop{ position:fixed; inset:0; background:rgba(0,0,0,.45); z-index:1030; }

  .only-mobile{ display:block; }
  .only-desktop, .btn-hamburger{ display:none; }
  .topbar{ display:flex !important; align-items:center; gap:12px; padding:12px 14px;
    border-bottom:1px solid rgba(255,255,255,.12); background: linear-gradient(180deg, #161333 0%, #12102a 100%);
    position: sticky; top:0; z-index:50; }

  .dashboard-grid{
    grid-template-columns:1fr;
    grid-template-areas:
      "calendar"
      "cat"
      "notes"
      "tasks"
      "learning";
  }
  .calendar-box{ height:360px !important; }
}
@media (max-width: 768px){
  .calendar-box{ height:340px !important; }
}
@media (max-width: 480px){
  .app-content{ padding:12px; }
  .calendar-box{ height:320px !important; }
}

/* Helpers */
.page-wrap { display:flex; flex-direction:column; gap:16px; }
.page-title { font-size:24px; font-weight:800; margin:0 0 8px; }
.grid-2 { display:grid; grid-template-columns: 1fr 1fr; }
@media (max-width: 980px){ .grid-2 { grid-template-columns: 1fr; } }
.gap-16 { gap:16px; }
.gap-12 { gap:12px; }
.gap-8 { gap:8px; }
.mt-8 { margin-top:8px; }
.mt-12 { margin-top:12px; }
.mb-8 { margin-bottom:8px; }

.input, .textarea {
  width:100%; background:#151329; color:#fff; border:1px solid #3b365a;
  border-radius:10px; padding:10px 12px; outline:none;
}
.btn-primary {
  background:#7b2ff7; color:#fff; border:0; padding:10px 14px; border-radius:12px; cursor:pointer;
}
.btn-ghost { background:transparent; border:1px solid #3b365a; color:#fff; padding:8px 10px; border-radius:10px; cursor:pointer; }
.btn-ghost.danger { border-color:#7b2f2f; color:#ff9a9a; }

.list { display:flex; flex-direction:column; }
.item-row { display:flex; align-items:center; justify-content:space-between; gap:10px; padding:10px 0; border-bottom:1px solid #2a2740; }
.note { display:flex; align-items:flex-start; justify-content:space-between; gap:12px; padding:10px 0; border-bottom:1px solid #2a2740; }
.note-body { white-space:pre-wrap; }

/* Chart */
.chart { width:100%; height:240px; }
.axis { stroke:#433b70; stroke-width:1; }
.chart-line { stroke:#9b6bff; stroke-width:2; }
.chart-dot { fill:#c3a1ff; }
.chart-label { fill:#c3a1ff; font-size:12px; }

.card-bugcit { max-width: 100%; overflow: hidden; }
.badge { max-width: 100%; white-space: nowrap; text-overflow: ellipsis; overflow: hidden; }

@media (max-width: 480px){
  .item-left, .note-body { word-break: break-word; }
}

@media (max-width: 480px){
  .calendar-box .fc-daygrid-day-frame { padding: 4px 2px; }
  .day { min-height: 84px; }
}

@media (max-width: 480px){
  .app-content { padding: 10px; }
}

/* ===== Agenda responsive ===== */
.agenda-list{
  list-style:none; margin:0; padding:0;
  display:grid; gap:12px;
}
.agenda-empty{
  opacity:.65; padding:12px; text-align:center;
  border:1px solid var(--line); border-radius:12px;
  background: var(--panel-2);
}
.agenda-item{
  display:grid;
  grid-template-columns: auto 1fr auto; /* fecha | título flexible | acciones */
  align-items:center; gap:12px;
  padding:12px; border:1px solid var(--line);
  background: var(--panel-2);
  border-radius:12px;
}
.agenda-chip{ white-space:nowrap; }

.agenda-title{
  font-weight:800; color:var(--text);
  min-width:0;               /* permite que el ellipsis funcione */
  overflow:hidden;
  text-overflow:ellipsis;    /* en desktop, título en una línea */
  white-space:nowrap;
}

.agenda-actions{
  display:flex; gap:8px; align-items:center;
}

/* En pantallas angostas: acciones ocupan su propia fila,
   el título puede envolver en varias líneas */
@media (max-width: 420px){
  .agenda-item{
    grid-template-columns: auto 1fr;   /* fecha | título */
  }
  .agenda-title{
    white-space:normal;                 /* deja que el texto baje */
  }
  .agenda-actions{
    grid-column: 1 / -1;                /* fila completa al final */
    justify-self:end;                   /* alinear botones a la derecha */
  }
}

/* Agenda como tarjetas responsivas */
.agenda-cards{
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap:12px;
}
.agenda-card .agenda-card-title{
  font-weight:800;
  line-height:1.25;
  word-break:break-word;
}

/* ======= Tareas como cards ======= */
.task-cards{
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 12px;
  align-content: start;
}

.task-card{
  background: var(--panel-2);
  border: 1px solid var(--line);
  border-radius: 12px;
  padding: 12px;
  display: flex;
  flex-direction: column;
  min-height: 110px;
}

.task-check{
  display: grid;
  grid-template-columns: 20px 1fr;
  align-items: start;
  gap: 10px;
}

.task-check input{
  width: 18px; height: 18px;
  accent-color: var(--brand);
  margin-top: 3px;
}

.task-title{
  font-weight: 800;
  line-height: 1.25;
  /* Evita que se “rompa” el layout con textos largos */
  word-break: break-word;      /* soportes amplios */
  overflow-wrap: anywhere;     /* fallback moderno */
}

.task-footer{
  margin-top: auto;
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

/* En pantallas chicas el input + botón bajan a una columna */
@media (max-width: 720px){
  .task-new.inline{
    grid-template-columns: 1fr !important;
  }
}

/* Forzar el formulario de "Nueva tarea" a dos columnas: input + botón */
.task-new.inline{
  display: grid;
  grid-template-columns: 1fr auto; /* input ocupa todo, botón lo que necesite */
  gap: 10px;
}

/* En pantallas chicas, que bajen a una columna */
@media (max-width: 720px){
  .task-new.inline{
    grid-template-columns: 1fr !important;
  }
}

/* ====== Notas layout moderno ====== */
.notes-grid{
  display: grid;
  grid-template-columns: minmax(300px, 0.9fr) minmax(440px, 1.1fr);
  gap: 16px;
  align-items: start; /* para que la izquierda no crezca con la derecha */
}

/* Panel izquierdo fijo y cómodo */
.notes-left{
  position: sticky;
  top: 16px;           /* queda “pegado” bajo la topbar al hacer scroll */
  align-self: start;
}

/* Card derecha: su body es scroll interno, no estira la página */
.notes-right .notes-scroll{
  /* altura máxima relativa a la ventana; se ajusta al espacio disponible */
  max-height: min(68vh, 820px);
  overflow: auto;
  padding-right: 4px;
}

/* Grid de tarjetas dentro del scroll */
.notes-cards{
  display: grid;
  grid-template-columns: 1fr;   /* 1 columna, limpio y legible */
  gap: 12px;
}

/* Tarjeta de nota: consistente y moderna */
.note-card{
  display: flex;
  flex-direction: column;
  min-height: 140px;
}

/* Responsive: en móvil todo a una columna y sin sticky */
@media (max-width: 980px){
  .notes-grid{ grid-template-columns: 1fr; }
  .notes-left{ position: static; top: auto; }
  .notes-right .notes-scroll{ max-height: none; overflow: visible; }
}

